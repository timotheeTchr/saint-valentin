<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Qu'est-ce que c'est ?</title>
  <style>
    :root{
      --bg1:#ffdde1; --bg2:#ee9ca7; --card:#ffffffcc; --text:#2b2b2b;
      --yes:#22c55e; --no:#ef4444; --muted: rgba(0,0,0,.65);
      --good:#16a34a; --bad:#dc2626;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      overflow:hidden;
      background: #f8fafc; /* fond neutre par d√©faut (pendu) */
    }
    body.valentine-bg{
      background: radial-gradient(1200px 600px at 30% 20%, var(--bg1), transparent),
                  radial-gradient(900px 500px at 70% 80%, var(--bg2), transparent),
                  linear-gradient(135deg, #fff1f2, #ffe4e6);
    }

    /* Coeurs flottants (seulement sur valentine) */
    .heart{
      position:absolute;
      width:18px;height:18px;
      transform: rotate(45deg);
      background: rgba(255, 0, 98, .18);
      animation: floatUp linear forwards;
      border-radius: 3px;
      pointer-events:none;
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:18px;height:18px;
      background: inherit;
      border-radius:50%;
    }
    .heart:before{ left:-9px; top:0; }
    .heart:after{ left:0; top:-9px; }
    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg); opacity:0;}
      10%{opacity:1}
      to{ transform: translateY(-120vh) rotate(45deg); opacity:0;}
    }

    .card{
      width:min(640px, 92vw);
      background:var(--card);
      border:1px solid rgba(255,255,255,.6);
      backdrop-filter: blur(10px);
      border-radius:22px;
      padding:28px 22px;
      box-shadow: 0 20px 70px rgba(0,0,0,.12);
      text-align:center;
      position:relative;
    }

    .badge{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 12px; border-radius:999px;
      background:#fff; border:1px solid rgba(0,0,0,.06);
      font-size:14px; margin-bottom:10px;
    }

    h1{ margin:8px 0 8px; font-size: clamp(24px, 4vw, 36px); letter-spacing:-0.02em; }
    .sub{ margin:0 0 18px; font-size: clamp(14px, 2.2vw, 16px); opacity:.85; line-height:1.4; }

    .screen{ display:none; }
    .screen.active{ display:block; }

    /* ---- Hangman ---- */
    .hm-wrap{ display:grid; grid-template-columns: 1fr; gap:16px; justify-items:center; }
    .hm-word{
      font-size: clamp(22px, 4vw, 34px);
      letter-spacing: .28em;
      padding: 10px 8px 8px;
      background: rgba(255,255,255,.85);
      border: 1px dashed rgba(0,0,0,.12);
      border-radius: 16px;
      width: min(520px, 90%);
    }
    .hm-word span{ display:inline-block; min-width: .8em; }
    .hm-meta{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; font-size:14px; color: rgba(0,0,0,.75); }
    .pill{ padding:8px 10px; border-radius:999px; background:#fff; border:1px solid rgba(0,0,0,.06); }
    .hm-input{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; width: min(520px, 100%); }
    input[type="text"]{
      width: 72px; text-align:center; font-size:18px;
      padding:12px 10px; border-radius:14px;
      border:1px solid rgba(0,0,0,.12);
      background: rgba(255,255,255,.95);
      outline:none;
    }
    .btn{
      border:0; padding:12px 16px; border-radius:14px;
      font-weight:800; font-size:15px; cursor:pointer;
      box-shadow: 0 12px 26px rgba(0,0,0,.12);
      transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease;
      user-select:none; -webkit-tap-highlight-color: transparent;
      background:#111827; color:white;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn.secondary{
      background: rgba(255,255,255,.9);
      color:#111827;
      border:1px solid rgba(0,0,0,.10);
      box-shadow: none;
      font-weight:700;
    }
    .hm-letters{
      display:flex; gap:8px; flex-wrap:wrap; justify-content:center;
      width:min(560px, 100%); padding-top:6px;
    }
    .letter{
      width: 36px; height: 36px; border-radius:12px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.08);
      font-weight:800; user-select:none;
    }
    .letter.good{ background: rgba(22,163,74,.16); border-color: rgba(22,163,74,.25); color: var(--good); }
    .letter.bad{ background: rgba(220,38,38,.14); border-color: rgba(220,38,38,.25); color: var(--bad); text-decoration: line-through; }
    .hm-status{ font-size:14px; color: var(--muted); min-height: 20px; }
    .hm-done{ display:none; margin-top: 6px; font-size: 14px; color: rgba(0,0,0,.75); }
    .hm-done strong{ color: #111827; }

    .hm-figure{
      width: min(360px, 90%);
      height: 160px;
      border-radius: 18px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(0,0,0,.06);
      position:relative;
      overflow:hidden;
    }
    .bar{ position:absolute; background: rgba(0,0,0,.18); border-radius: 6px; }
    .bar.base{ left:26px; right:26px; bottom:18px; height:10px; }
    .bar.pole{ left:58px; bottom:18px; width:10px; height:120px; }
    .bar.top{ left:58px; top:22px; width:170px; height:10px; }
    .bar.rope{ left:218px; top:22px; width:8px; height:28px; border-radius: 999px; }
    .part{ position:absolute; opacity:0; transition: opacity .25s ease; }
    .part.show{ opacity:1; }
    .head{ left:200px; top:50px; width:44px; height:44px; border:8px solid rgba(244,63,94,.45); border-radius:999px; }
    .body{ left:219px; top:94px; width:8px; height:44px; background: rgba(244,63,94,.45); border-radius:999px; }
    .armL{ left:219px; top:104px; width:34px; height:8px; background: rgba(244,63,94,.45); border-radius:999px; transform: rotate(-25deg); transform-origin:left center; }
    .armR{ left:193px; top:104px; width:34px; height:8px; background: rgba(244,63,94,.45); border-radius:999px; transform: rotate(25deg); transform-origin:right center; }
    .legL{ left:219px; top:132px; width:34px; height:8px; background: rgba(244,63,94,.45); border-radius:999px; transform: rotate(25deg); transform-origin:left center; }
    .legR{ left:193px; top:132px; width:34px; height:8px; background: rgba(244,63,94,.45); border-radius:999px; transform: rotate(-25deg); transform-origin:right center; }

    /* ---- Question ---- */
    .gif{
      width: min(320px, 75vw);
      margin: 12px auto 18px;
      aspect-ratio: 1 / 1;
      border-radius:20px;
      display:grid;
      place-items:center;
      background:
        radial-gradient(120px 90px at 30% 35%, #fff, transparent),
        radial-gradient(140px 100px at 70% 65%, #fff, transparent),
        linear-gradient(135deg, #fecdd3, #fda4af);
      overflow:hidden;
    }
    .gif span{
      font-size:64px;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.15));
      animation: pop 1.2s ease-in-out infinite alternate;
    }
    @keyframes pop{ from{transform:scale(0.96)} to{transform:scale(1.08)} }

    .row{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; padding-top:8px; }
    .qbtn{
      border:0; padding:14px 18px; border-radius:14px;
      font-weight:800; font-size:16px; cursor:pointer;
      box-shadow: 0 12px 26px rgba(0,0,0,.12);
      transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease;
      user-select:none; -webkit-tap-highlight-color: transparent;
    }
    .qbtn:active{ transform: translateY(1px) scale(.99); }
    #yesBtn{ background: linear-gradient(135deg, #34d399, var(--yes)); color:white; min-width: 160px; }
    #noBtn{
      background: linear-gradient(135deg, #fb7185, var(--no));
      color:white; min-width: 160px;
      position:relative;
      touch-action:none;
    }
    .fine{ margin-top:14px; font-size:12px; opacity:.65; }

    .overlay{
      position:fixed; inset:0;
      display:none; place-items:center;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(8px);
      z-index:50;
      padding:20px;
    }
    .modal{
      width:min(560px, 92vw);
      background:white; border-radius:22px;
      padding:24px 18px; text-align:center;
      box-shadow: 0 30px 90px rgba(0,0,0,.25);
    }
    .modal h2{ margin:8px 0; font-size: clamp(22px, 3.2vw, 30px); }
    .modal p{ margin:0 0 14px; opacity:.85; }
    .close{
      background:#111827; color:white;
      padding:12px 16px; border-radius:12px; font-weight:800;
      border:0; cursor:pointer;
    }

    .confetti{
      position:fixed; top:-20px;
      width:10px; height:14px;
      opacity:0.9;
      animation: fall linear forwards;
      z-index:60;
      pointer-events:none;
    }
    @keyframes fall{
      to{ transform: translateY(110vh) rotate(720deg); opacity:1; }
    }
  </style>
</head>
<body>
  <div class="card">

    <!-- SCREEN 1: Hangman -->
    <section class="screen active" id="hangmanScreen">
      <div class="badge">üß© <strong>Mini-jeu</strong> ‚Ä¢ trouve le mot secret</div>

      <div class="hm-wrap">
        <div class="hm-figure" aria-hidden="true">
          <div class="bar base"></div>
          <div class="bar pole"></div>
          <div class="bar top"></div>
          <div class="bar rope"></div>

          <div class="part head" id="p1"></div>
          <div class="part body" id="p2"></div>
          <div class="part armL" id="p3"></div>
          <div class="part armR" id="p4"></div>
          <div class="part legL" id="p5"></div>
          <div class="part legR" id="p6"></div>
        </div>

        <div class="hm-word" id="word"></div>

        <div class="hm-meta">
          <div class="pill">Erreurs : <strong id="misses">0</strong>/6</div>
          <div class="pill">Lettres essay√©es : <strong id="triedCount">0</strong></div>
        </div>

        <div class="hm-input">
          <input id="guess" type="text" inputmode="text" maxlength="1" placeholder="?" aria-label="Lettre" />
          <button class="btn" id="guessBtn" type="button">Essayer</button>
          <button class="btn secondary" id="resetBtn" type="button">Recommencer</button>
        </div>

        <div class="hm-status" id="status"></div>
        <div class="hm-letters" id="letters"></div>

        <div class="hm-done" id="doneBox">
          <strong>Bravo !</strong> Tu as trouv√© le mot üíñ
          <div style="margin-top:10px">
            <button class="btn" id="continueBtn" type="button">Continuer ‚ûú</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SCREEN 2: Question -->
    <section class="screen" id="questionScreen">
      <div class="badge">üíå <strong>Message secret</strong> ‚Ä¢ ouvre avec ton c≈ìur</div>
      <h1 id="title">Veux-tu √™tre ma Valentine ? üíò</h1>

      <div class="gif" aria-hidden="true"><span id="emoji">‚ù§Ô∏è</span></div>

      <div class="row">
        <button class="qbtn" id="yesBtn" type="button">Oui üòÅ</button>
        <button class="qbtn" id="noBtn" type="button">Non üôà</button>
      </div>

    </section>
  </div>

  <div class="overlay" id="overlay">
    <div class="modal">
      <div style="font-size:56px">üéâüíñ</div>
      <h2>Yesss !!</h2>
      <p id="finalText">Rendez-vous dimanche pour passer une super soir√©e alors !!! üòÅ</p>
      <button class="close" id="closeBtn" type="button">Ok üòò</button>
    </div>
  </div>

  <script>
    // -------------------- Helpers --------------------
    function normalizeLetter(ch){
      return (ch || "").toLowerCase().replace(/[^a-z]/g, "");
    }

    // -------------------- Background hearts (ONLY on valentine screen) --------------------
    let heartsTimer = null;
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      const x = Math.random() * 100;
      const dur = 6 + Math.random() * 6;
      const size = 10 + Math.random() * 18;
      h.style.left = x + 'vw';
      h.style.bottom = (-20 - Math.random()*40) + 'px';
      h.style.animationDuration = dur + 's';
      h.style.width = size + 'px';
      h.style.height = size + 'px';
      h.style.background = `rgba(255, 0, 98, ${0.10 + Math.random()*0.18})`;
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), dur*1000);
    }
    function enableValentineBg(){
      document.body.classList.add('valentine-bg');
      if (!heartsTimer) heartsTimer = setInterval(spawnHeart, 380);
    }

    // -------------------- Screens --------------------
    const hangmanScreen = document.getElementById('hangmanScreen');
    const questionScreen = document.getElementById('questionScreen');

    function showQuestion(){
      hangmanScreen.classList.remove('active');
      questionScreen.classList.add('active');
      enableValentineBg();
      resetNoButton();
    }

    // -------------------- Hangman --------------------
    const SECRET = "valentine";
    const MAX_MISSES = 6;

    const wordEl = document.getElementById('word');
    const missesEl = document.getElementById('misses');
    const triedCountEl = document.getElementById('triedCount');
    const lettersEl = document.getElementById('letters');
    const statusEl = document.getElementById('status');
    const guessInput = document.getElementById('guess');
    const guessBtn = document.getElementById('guessBtn');
    const resetBtn = document.getElementById('resetBtn');
    const continueBtn = document.getElementById('continueBtn');
    const doneBox = document.getElementById('doneBox');

    const parts = [
      document.getElementById('p1'),
      document.getElementById('p2'),
      document.getElementById('p3'),
      document.getElementById('p4'),
      document.getElementById('p5'),
      document.getElementById('p6')
    ];

    let guessed = new Set();
    let misses = 0;
    let finished = false;

    function renderWord(){
      const chars = SECRET.split("");
      wordEl.innerHTML = chars.map(c=>{
        const show = guessed.has(c) ? c.toUpperCase() : "‚Ä¢";
        return `<span>${show}</span>`;
      }).join("");
    }

    function renderLetters(){
      const A = "abcdefghijklmnopqrstuvwxyz".split("");
      lettersEl.innerHTML = A.map(l=>{
        let cls = "letter";
        if (guessed.has(l)){
          cls += SECRET.includes(l) ? " good" : " bad";
        }
        return `<div class="${cls}">${l.toUpperCase()}</div>`;
      }).join("");
    }

    function renderFigure(){
      parts.forEach((p,i)=> p.classList.toggle('show', i < misses));
    }

    function renderMeta(){
      missesEl.textContent = String(misses);
      triedCountEl.textContent = String(guessed.size);
    }

    function isWin(){
      return SECRET.split("").every(c => guessed.has(c));
    }

    function setStatus(msg, good=false){
      statusEl.textContent = msg;
      statusEl.style.color = good ? "rgba(22,163,74,.95)" : "rgba(0,0,0,.65)";
    }

    function endGame(win){
      finished = true;
      guessBtn.disabled = true;
      guessInput.disabled = true;

      if (win){
        setStatus("‚úÖ Gagn√© ! Tu peux voir le message secret !!", true);
        doneBox.style.display = "block";
      } else {
        setStatus(`üíÄ Perdu‚Ä¶ Recommence üòâ`);
        doneBox.style.display = "none";
      }
    }

    function tryGuess(){
      if (finished) return;
      const l = normalizeLetter(guessInput.value);
      guessInput.value = "";
      guessInput.focus();

      if (!l){
        setStatus("Entre une lettre (A-Z).");
        return;
      }
      if (guessed.has(l)){
        setStatus("Tu as d√©j√† essay√© cette lettre üôÇ");
        return;
      }

      guessed.add(l);

      if (!SECRET.includes(l)){
        misses++;
        setStatus("‚ùå Rat√©‚Ä¶");
        renderFigure();
        if (misses >= MAX_MISSES){
          renderWord(); renderLetters(); renderMeta();
          endGame(false);
          return;
        }
      } else {
        setStatus("‚úÖ Bien jou√© !", true);
      }

      renderWord();
      renderLetters();
      renderMeta();

      if (isWin()) endGame(true);
    }

    function resetHangman(){
      guessed = new Set();
      misses = 0;
      finished = false;
      guessBtn.disabled = false;
      guessInput.disabled = false;
      doneBox.style.display = "none";
      setStatus("Tape une lettre puis ‚ÄúEssayer‚Äù.");
      parts.forEach(p=>p.classList.remove('show'));
      renderWord();
      renderLetters();
      renderMeta();
      guessInput.value = "";
      guessInput.focus();
    }

    guessBtn.addEventListener('click', tryGuess);
    resetBtn.addEventListener('click', resetHangman);
    guessInput.addEventListener('keydown', (e)=>{ if (e.key === "Enter") tryGuess(); });
    continueBtn.addEventListener('click', showQuestion);

    resetHangman();

    // -------------------- Valentine screen (Yes/No) --------------------
    const yesBtn = document.getElementById('yesBtn');
    const noBtn  = document.getElementById('noBtn');
    const overlay = document.getElementById('overlay');
    const closeBtn = document.getElementById('closeBtn');
    const emoji = document.getElementById('emoji');
    const title = document.getElementById('title');
    const subtitle = document.getElementById('subtitle');

    // Personnalisation rapide
    const NAME = ""; // ex: "Sarah"
    const FINAL_LINE = "Rendez-vous dimanche pour passer une super soir√©e alors !!! üòÅ";
    if (NAME.trim()) title.textContent = `${NAME}, tu veux √™tre ma Saint-Valentin ? üíò`;
    document.getElementById('finalText').textContent = FINAL_LINE;

    function resetNoButton(){
      noBtn.style.position = "relative";
      noBtn.style.left = "";
      noBtn.style.top = "";
      noBtn.style.transform = "";
    }

  function randomPositionForNo(){
    const pad = 12;

    // dimensions du viewport (zone visible)
    const vw = document.documentElement.clientWidth;
    const vh = document.documentElement.clientHeight;

    // dimensions du bouton
    const bw = noBtn.offsetWidth;
    const bh = noBtn.offsetHeight;

    // si le viewport est trop petit, on √©vite les NaN/n√©gatifs
    const maxX = Math.max(pad, vw - bw - pad);
    const maxY = Math.max(pad, vh - bh - pad);

    // position al√©atoire ‚Äúdans l‚Äô√©cran‚Äù
    let x = pad + Math.random() * (maxX - pad);
    let y = pad + Math.random() * (maxY - pad);

    noBtn.style.position = 'fixed';
    noBtn.style.left = x + 'px';
    noBtn.style.top  = y + 'px';
    noBtn.style.zIndex = '9999';

    // S√©curit√©: on corrige si malgr√© tout √ßa d√©passe (zoom, arrondis, etc.)
    const r = noBtn.getBoundingClientRect();
    if (r.right > vw - pad) noBtn.style.left = (vw - pad - bw) + 'px';
    if (r.bottom > vh - pad) noBtn.style.top = (vh - pad - bh) + 'px';
    if (r.left < pad) noBtn.style.left = pad + 'px';
    if (r.top < pad) noBtn.style.top = pad + 'px';
  }



    let noCount = 0;
    function moveNoForever(){
      noCount++;
      randomPositionForNo();
      noBtn.style.display = "inline-block";
      noBtn.style.opacity = "1";

      const phrases = ["T‚Äôes s√ªr(e) ? ü§®","Allez stp !!","Essaie encore üòù","Impossible üòà","Hehe üòè","Nope üôÉ"];
      subtitle.textContent = phrases[(noCount-1) % phrases.length];
      const em = ["üò§","üòá","üòà","üòè","üôÉ"];
      emoji.textContent = em[(noCount-1) % em.length];

      // Oui grandit √† l'infini (doucement)
      const scale = 1 + Math.log1p(noCount) * 0.18;
      yesBtn.style.transform = `scale(${scale})`;
    }

    // Desktop
    noBtn.addEventListener('pointerenter', moveNoForever);
    noBtn.addEventListener('pointerdown', (e)=>{ e.preventDefault(); moveNoForever(); });
    // Mobile
    noBtn.addEventListener('touchstart', (e)=>{ e.preventDefault(); moveNoForever(); }, {passive:false});

    function confettiBurst(){
      const count = 130;
      for (let i=0; i<count; i++){
        const c = document.createElement('div');
        c.className = 'confetti';
        const x = Math.random() * 100;
        const dur = 2.8 + Math.random() * 2.6;
        const drift = (Math.random()*2 - 1) * 120;
        const w = 6 + Math.random()*10;
        const h = 8 + Math.random()*16;

        c.style.left = x + 'vw';
        c.style.animationDuration = dur + 's';
        c.style.width = w + 'px';
        c.style.height = h + 'px';
        c.style.borderRadius = (Math.random() > 0.6) ? '999px' : '2px';
        const colors = ["#fb7185","#f43f5e","#ec4899","#a78bfa","#60a5fa","#34d399","#f59e0b"];
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        c.style.transform = `translateX(${drift}px) rotate(${Math.random()*360}deg)`;
        document.body.appendChild(c);
        setTimeout(()=>c.remove(), dur*1000);
      }
    }

    yesBtn.addEventListener('click', ()=>{
      confettiBurst();
      overlay.style.display = 'grid';
      title.textContent = "Je le savais üòÅ";
      subtitle.textContent = "Trop h√¢te !!";
      emoji.textContent = "üíû";
    });

    closeBtn.addEventListener('click', ()=> overlay.style.display = 'none');
    window.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') overlay.style.display = 'none'; });

    window.addEventListener('resize', ()=>{
      if (getComputedStyle(noBtn).position === "fixed") randomPositionForNo();
    });
  </script>
</body>
</html>
